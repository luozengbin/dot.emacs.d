.\" (C)Copyright 1999-2003 Marvell(R) -- linux@syskonnect.de
.\" sk98lin.4 1.1 2003/12/17 10:03:18
.\" This manpage can be viewed using `groff -Tascii -man sk98lin.4 | less`
.\"
.\" This is free documentation; you can redistribute it and/or
.\" modify it under the terms of the GNU General Public License as
.\" published by the Free Software Foundation; either version 2 of
.\" the License, or (at your option) any later version.
.\"
.\" The GNU General Public License's references to "object code"
.\" and "executables" are to be interpreted as the output of any
.\" document formatting or typesetting system, including
.\" intermediate and printed output.
.\"
.\" This manual is distributed in the hope that it will be useful,
.\" but WITHOUT ANY WARRANTY; without even the implied warranty of
.\" MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
.\" GNU General Public License for more details.
.\"
.\" You should have received a copy of the GNU General Public
.\" License along with this manual; if not, write to the Free
.\" Software Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111,
.\" USA.
.\"
.\" Japanese Version Copyright (c) 2004 Yuichi SATO
.\"         all rights reserved.
.\" Translated 2004-10-09, Yuichi SATO <ysato444@yahoo.co.jp>
.\" Modified 2007-06-05, Akihiro MOTOKI <amotoki@dd.iij4u.or.jp>, LDP v2.51
.\"
.\"WORD:	autonegotiation	荐
.\"WORD:	interrupt moderation	蚊莨若粋停
.\"
.TH SK98LIN 4 2007-11-25 "Linux" "Linux Programmer's Manual"
.SH 名前
sk98lin \- Marvell/SysKonnect ットゃ若泣ットドゃ v6.21
.SH 後
.B insmod sk98lin.o
.RB [ Speed_A=\c
.IR i,j,... ]
.RB [ Speed_B=\c
.IR i,j,... ]
.RB [ AutoNeg_A=\c
.IR i,j,... ]
.RB [ AutoNeg_B=\c
.IR i,j,... ]
.RB [ DupCap_A=\c
.IR i,j,... ]
.RB [ DupCap_B=\c
.IR i,j,... ]
.RB [ FlowCtrl_A=\c
.IR i,j,... ]
.RB [ FlowCtrl_B=\c
.IR i,j,... ]
.RB [ Role_A=\c
.IR i,j,... ]
.RB [ Role_B=\c
.IR i,j,... ]
.RB [ ConType=\c
.IR i,j,... ]
.RB [ Moderation=\c
.IR i,j,... ]
.RB [ IntsPerSec=\c
.IR i,j,... ]
.RB [ PrefPort=\c
.IR i,j,... ]
.RB [ RlmtMode=\c
.IR i,j,... ]
.SH 茯
.ad l
.hy 0
.B sk98lin
は Marvell と SysKonnect ット若≪プ帥若の
ットゃ若泣ットドゃсる。
これは SysKonnect SK-98xx/SK-95xx 篋換ットゃ若泣ット≪プ帥
Yukon 篋換ップ祉トを泣若しる。

insmod を篏帥ｃゃを若する際、
ネット若≪プ帥若＜若帥
潟潟у阪られた潟潟絎するこсる。
2 ゃット若≪プ帥取り篁けられる時
箴え違1 ょ≪プ帥若 A ネ眼激若激с潟 ON るが、
2 ょ≪プ帥若 A は OFF る翫
篁ヤうュすれ違い:

   insmod sk98lin.o AutoNeg_A=On,Off

.B sk98lin
が 1 や札筝≪プ帥若∫ｃャられ
かつ
.I /proc
フ＜ゃ激鴻ムが激鴻ム潟される翫、
取り篁けられるネット若≪プ帥若若ゃ
(ポ若単篏に) 絨輝荐フ＜ゃフ
.I /proc/net/sk98lin
られる。
これら＜ゃ
.I eth[x]
う名前сり、
.I x
ゃ潟帥с若鴻垩сる。
こ垩激鴻ムｃ若罸蚊綵れたもсる。

若が絎篋する
.BR ifconfig (8)
潟潟を篏帥ｃ各
.I eth[x]
ゃ潟帥с若鴻望する IP ≪鴻蚊綵こсる。
これり≪プ帥ゃ若泣ット･膓され、
潟潟純若倶＜祉若吾茵ずされる。
こ＜祉若吾с
"ethx: network connection up using port y" に
荐されたり罎冴れた･膓パ＜若帥茵ずされる。

.B sk98lin
若吾若 (吾ｃ潟フ若若違る) も泣若する。
吾ｃ潟フ若を篏帥紊ч若帥荵∫する際
鴻若ットを紊у筝させるこсる。
若吾若を有鴻る
ゃ潟帥с若鴻 MTU (maximum transfer unit, 最紊ц拶送単篏) 泣ゃ冴
紊сゃ┃絎すれ違い。
デフの MTU 泣ゃ冴 1500 сり、
最紊с 9000 (バゃ) 障ц┃絎するこсる。
MTU 泣ゃ冴荐する
ゃ潟帥с若鴻 IP ≪鴻蚊綵сるし、緇から
.BR ifconfig (8)
潟潟に mtu 綣き違指絎するこц┃絎するこсる。
箴え違eth0 に IP ≪鴻若吾若 MTU 泣ゃ冴
蚊綵い翫、篁ヤの 2 ゃ潟潟を絎茵すれ違い:

    ifconfig eth0 10.1.1.1
    ifconfig eth0 mtu 9000

これらの 2 ゃ潟潟は 1 ゃ障るこсる:

    ifconfig eth0 10.1.1.1 mtu 9000

若吾若を篏睡сるネット若医で
若吾若戎茯められる翫帥сる鴻絵意するこ
ゃ障、ゃ若泣ットт戎われる鴻ゃチс
若吾若が泣若されれ違。
紊く鴻ゃチが若吾若を泣若しるが、
荐を茵う綽荀がある。
紊く翫、デフ┃絎с羣フ若
(1500 バゃの MTU 泣ゃ) だけしか泣若し。
ネット若鴻ゃチえ、
篏睡れるット若≪プ帥с
吾ｃ潟フ若が有鴻ｃれ違。
≪プ帥若吾若を受け取るよう┃絎され翫、
≪プ帥若を単膣障。

罔羣ゃ若泣ットフ若泣ゃ冴祉再び
.BR ifconfig (8)
潟潟を篏帥違い:

    ifconfig eth0 mtu 1500

Linux の Marvell/SysKonnect ットゃ若泣ットドゃ
IEEE 荀格 802.1, 802.1q, 802.3ad 拠する
VLAN と Link Aggregation 綽しる。
これら純ゃ潟帥若ットる若潟純若鴻≪吾ャ若
ゃ潟鴻若た緇с水純сる:

.IR VLAN \c
: http://www.candelatech.com/~greear/vlan.html
.br
.I Link
.IR Aggregation \c
: http://www.st.rim.or.jp/~yumo

.br
Marvell/SysKonnect これら若潟純若鴻≪吾ャ若する泣若は
茵ｃらず、これらを篏帥ｃ翫じるいか紊掩や馹ゃ
莢算を莢わ鴻絵意するこ
.SS 綣き数
.TP
.BI Speed_A= i,j,...
こ＜若帥≪プ帥若若 A が泣若する潟綺
荐する戎われる。これは Yukon copper ≪プ帥с炊鴻сる。
篏睡純ゃ札筝り:
.IR 10 ,
.IR 100 ,
.IR 1000 ,
.IR Auto 。
デフは
.I Auto
сる。
通絽吾潟綺潟∈腴時に 2 ゃ若ц荐される。
これけ敗した翫、ポ若き違ф絎された荐。
.TP
.BI Speed_B= i,j,...
こ＜若帥≪プ帥若若 B が泣若する潟綺
荐する戎われる。これは Yukon copper ≪プ帥с炊鴻сる。
篏睡純ゃ札筝り:
.IR 10 ,
.IR 100 ,
.IR 1000 ,
.IR Auto 。
デフは
.I Auto
сる。
通絽吾潟綺潟∈腴時に 2 ゃ若ц荐される。
これけ敗した翫、ポ若き違ф絎された荐。
.TP
.BI AutoNeg_A= i,j,...
≪プ帥若若 A 荐 (autonegotiation) 戎
有鴻障≦鴻る。篏睡純ゃ札筝り:
.IR On ,
.IR Off ,
.IR Sense 。
デフは
.I On
сる。
.I Sense
≪若潟若ナが荐を泣若しるかを
的ャる。
.TP
.BI AutoNeg_B= i,j,...
≪プ帥若若 B 荐 (autonegotiation) 戎
有鴻障≦鴻る。篏睡純ゃ札筝り:
.IR On ,
.IR Off ,
.IR Sense 。
デフは
.I On
сる。
.I Sense
≪若潟若ナが荐を泣若しるかを
的ャる。
.TP
.BI DupCap_A= i,j,...
こき違≪プ帥若若 A т戎う篋重通篆 (duplex) ≪若を腓冴。
篏睡純ゃ札筝り:
.IR Half ,
.IR Full ,
.IR Both 。
デフは
.I Both
сる。
こき違若 A の AutoNeg_A が
.I Sense
┃絎され翫炊鴻сる。
AutoNeg_A が
.I On
翫、DupCap_A の 3 ゃ
.RI ( Half ,
.IR Full ,
.IR Both )
＜с指絎するこсる。
AutoNeg_A が
.I Off
翫、DupCap_A 
.I Full
と
.I Half
帥指絎するこсる。
この DupCap_A 綣き違潟若ナが重通篆＜水わせを
泣若し翫醜ゃ
.TP
.BI DupCap_B= i,j,...
こき違≪プ帥若若 B т戎う篋重通篆＜≪若を腓冴。
篏睡純ゃ札筝り:
.IR Half ,
.IR Full ,
.IR Both 。
デフは
.I Both
сる。
こき違若 B の AutoNeg_B が
.I Sense
┃絎され翫炊鴻сる。
AutoNeg_B が
.I On
翫、DupCap_B の 3 ゃ
.RI ( Half ,
.IR Full ,
.IR Both )
＜с指絎するこсる。
AutoNeg_B が
.I Off
翫、DupCap_B 
.I Full
と
.I Half
帥指絎するこсる。
この DupCap_B 綣き違潟若ナが重通篆＜水わせを
泣若し翫醜ゃ
.TP
.BI FlowCtrl_A= i,j,...
こき違荐時若が絲上える
フ弱九勝罘純荐する。
篏睡純ゃ札筝り:
.IR Sym ,
.IR SymOrRem ,
.IR LocSend ,
.IR None 。
デフは
.I SymOrRem
сる。
それぞれ≪若札筝う潟ある:

.br
.I Sym
= Symmetric
 潟若ナ鴻 PAUSE フ若を送るこсる。
.br
.I SymOrRem
= SymmetricOrRemote
 潟若ナ鴻障≪若パ若ナ帥
PAUSE フ若を送るこсる。
.br
.I LocSend
= LocalSend
 若潟若ナ帥 PAUSE フ若を送るこсる。
.br
.I None
= None
 潟若ナ＜も PAUSE フ若を送るこс。

こ＜若帥 AutoNeg_A が
.I Off
翫∴される鴻絵意するこ
.TP
.BI FlowCtrl_B= i,j,...
こき違荐時若が絲上える
フ弱九勝罘純荐する。
篏睡純ゃ札筝り:
.IR Sym ,
.IR SymOrRem ,
.IR LocSend ,
.IR None 。
デフは
.I SymOrRem
сる。
それぞれ≪若札筝う潟ある:

.I Sym
= Symmetric
 潟若ナ鴻 PAUSE フ若を送るこсる。
.br
.I SymOrRem
= SymmetricOrRemote
 潟若ナ鴻障≪若パ若ナ帥
PAUSE フ若を送るこсる。
.br
.I LocSend
= LocalSend
 若潟若ナ帥 PAUSE フ若を送るこсる。
.br
.I None
= None
 潟若ナ＜も PAUSE フ若を送るこс。
.br

こ＜若帥 AutoNeg_B が
.I Off
翫∴される鴻絵意するこ
.TP
.BI Role_A= i,j,...
こき違 1000Base-T ≪プ帥若с炊鴻сる。
2 ゃ 1000Base-T ポ若が通篆＜る翫、
片鴻 (帥ゃ潟井宴提箴する) マ鴻帥醜蚊しれ違ず、
もう片鴻鴻若れ違。
篏睡純ゃ札筝り:
.IR Auto ,
.IR Master ,
.IR Slave 。
デフは
.I Auto
сる。
通絽吾ポ若醜蚊 2 ゃ若с潟腆榊する荐される。
荐け敗した翫、
≪プ帥若若 A き違ф絎された荐。
.TP
.BI Role_B= i,j,...
こき違 1000Base-T ≪プ帥若с炊鴻сる。
2 ゃ 1000Base-T ポ若が通篆＜る翫、
片鴻 (帥ゃ潟井宴提箴する) マ鴻帥醜蚊しれ違ず、
もう片鴻鴻若れ違。
篏睡純ゃ札筝り:
.IR Auto ,
.IR Master ,
.IR Slave 。
デフは
.I Auto
сる。
通絽吾ポ若醜蚊 2 ゃ若с潟腆榊する荐される。
荐け敗した翫、
≪プ帥若若 B き違ф絎された荐。
.TP
.BI ConType= i,j,...
こき違ポ若罸絎する、 5 個き違水わせを、
1 ゃき違たもсる。
これり≪プ帥若の 2 ゃ若┃絎を膂∞ュсる。
こ違れぞれゃ
ポ若綣き違も意潟る腟水わせを反映したもсる。
篏睡純ゃれ綽するポ若罸＜若帥水わせ
篁ヤり:

.nf
ConType | DupCap   AutoNeg   FlowCtrl   Role   Speed
--------+-------------------------------------------
\fIAuto\fP    |  Both      On      SymOrRem   Auto   Auto
.br
\fI100FD\fP   |  Full      Off       None     Auto   100
.br
\fI100HD\fP   |  Half      Off       None     Auto   100
.br
\fI10FD\fP    |  Full      Off       None     Auto   10
.br
\fI10HD\fP    |  Half      Off       None     Auto   10

.fi
そ若綣き違
.I ConType
綣き違水わせ絎するそれら┃絎を腟合した荐。
これポ若罸き数 (箴えば
.IR Speed_A )
鴻腟水わせ紊数
.I ConType
より順篏が蕭いためсる。
.TP
.BI Moderation= i,j,...
蚊莨若粋停 (interrupt moderation) ドゃがを開紮しれば
蚊莨若水違紊уゃ荐するため戎れる。
ゃ障、ドゃがを茵う障с1回篁ヤ蚊莨若
(送篆＜障篆＜宴トがされること) がャ若ャられる。
ャ若ャられた蚊莨若帥いゅされるか
篁ヤц明する
.I IntsPerSec
綣き違ф浦絎される。
篏睡純停≪若札筝り:
.IR None ,
.IR Static ,
.IR Dynamic 。
デフは
.I None
сる。
それぞれ≪若札筝潟持つ:

.I None
≪プ帥若し蚊莨若粋停を。
よｃ篆＜障篆≦蚊莨若帥
≪プ帥若蚊莨若睡憗る眼される。

.br
.I Static
≪プ帥若し蚊莨若粋停がれる。
篆＜障篆≦蚊莨若帥茯水間隔が絎わる障
ャ若ャられる。
こ停間隔が腟わるャ若ャられた蚊莨若帥
1個ぇき綮吟される。
.I Static
うあるゃ潟帥с若鴻憜だけの
ネット若激かかｃるか≪らず、
蚊莨若粋停が絽吾鴻こ茵る。
さら茯水間隔間阪сドゃが動篏しる間化し。

.br
.I Dynamic
激鴻ム激じ≪プ帥若し蚊莨若粋停がれる。
ドゃが激鴻ム激蕭すぎる冴た翫、
蚊莨若粋停を有鴻るこり、
過違ット若激ら激鴻ムを篆茘激ようる。
\(emそに\(emCPU が再割がｃ翫
(障ット若激罐泣ずかｃ翫)、
蚊莨若粋停的≦鴻れる。

ドゃが宴れ違ゃ潟帥с若鴻ち
ネット若激蕭いも 1 や札筝あり、
\(emそ果\(emCPU が蕭くｃる翫、
蚊莨若粋停を篏帥鴻сる。
ネット若激蕭い倶ц停がれる
遅い潟潟ャ若帥с CPU 莢激 20-30% 削羝されるだろう。

蚊莨若粋停を篏帥こ鴻
緇緇綮倶間 (round-trip-time, RTT) 加がある鴻絵意するこ
これ蚊莨若帥ャ若ャられ、障されるためсる。
.TP
.BI IntsPerSec= i,j,...
こき違蚊莨若粋停隔を羆阪する。
静的 (static) 蚊莨若粋停が篏帥れる翫、
.I IntsPerSec
綣き違ゃ 2000 сれ違蚊莨若粋停隔は 500 ミ。
こき違┃絎純ゃ 30...40000 蚊с
これは 1 腱罸蚊莨若水違сる。
デフゃ 2000 сる。

こき違的 (static) 障的 (dynamic) 蚊莨若粋停が
有鴻ｃる推戎れる。
こき違蚊莨若粋停がれ翫∴される。

茯水間隔間絵意し吾吟
筝荀したろс激期間 (箴えば 1 腱間に 100 回だけ蚊莨若) を
吾吟潟あるようえるかもしれが、そうすると
パ宴ト綮吟羶し鍽加する。
筝鴻с茯水時間を吾吟蚊莨若粋停を篏帥意潟ｃ障。
.TP
.BI PrefPort= i,j,...
こき違 (2 ポ若ット若≪プ帥)
 (preferred) ポ若を A 障は B ＜るかを指絎する戎われる。
ポ若A と B 検鴻若が絎純るャれた翫に
篏睡れるポ若сる。
篏睡純ゃ札筝り:
.I A
障は
.IR B 。
デフは
.I A
сる。
.TP
.BI RlmtMode= i,j,...
RLMT 若倶をｈする。
≪ｃ若潟純＜翫、
RLMT 恰罘しる潟り帥る。
絨 1 ゃ的」潟莎桁する障с篁潟潟膓される。
こき違 RLMT が筝≧鴻若をうｈするかを羆冴る。
篏睡純ゃ札筝り:
.IR CheckLinkState ,
.IR CheckLocalPort ,
.IR CheckSeg ,
.IR DualNet 。
デフは
.I CheckLinkState
сる。
各≪若札筝う潟持ゃ

.I CheckLinkState
潟倶с:
RLMT 各ポ若ゃ≪プ帥若с≪怨する潟倶を篏帥、
そ若がット若ｃ送受篆＜る戎純を
羆阪する。

.br
.I CheckLocalPort
こ≪若сRLMT ≪プ帥若の 2 ゃ若で
絎期的宴トを篋ゆするこり、
2 ゃ若ット若莊ｈする。
こ≪若с 2 ゃ若が篋い荀える」ような
ネット若┃絎が綽荀сる
(ゃ障、ポ若間若帥あｃ)。

.br
.I CheckSeg
若若祉違＜潟をチсる。
こ≪若は CheckLocalPort ≪若じ罘純提箴し、
眼若間ット若祉違＜潟をチсる。
よｃこ≪若ット若に
鴻ニ潟違若潟 (Spanning Tree protocol) を
篏帥よう┃絎されたットゃ若泣ット鴻ゃチが
荐舟される翫推戎сる。

.br
.I DualNet
こ≪若сポ若 A と B がャバゃ鴻戎れる。
2 ポ若≪プ帥持ｃる翫、ポ若 A を
.I eth[x]
ポ若 B を
.I eth[x+1]
┃絎するこсる。
2 ゃ若ャの IP ≪鴻篁け戎るこсる。
ポ若┃絎戎れ。
RLMT ≦鴻れる。

RLMT ≪若
.I CheckLocalPort
と
.I CheckLinkState
1 ゃ≪プ推若間сット若莊あるよう┃絎で
動篏するよう┃荐される。
さらこ≪若≪プ水紕雁 (back-to-back) で
･膓される倶у篏するよう┃荐され。
.SH フ＜ゃ
.TP
.I /proc/net/sk98lin/eth[x]
.br
≪プ帥若劫ゃ潟帥с若鴻輝荐フ＜ゃ
こ＜ゃ≪プ帥若宴
篆＜糸篆＜潟帥膣違荀с障る。
.TP
.I /usr/src/linux/Documentation/networking/sk98lin.txt
.br
.I sk98lin
ドゃの
.I README
フ＜ゃсる。
これ膣違ゃ潟鴻若 HOWTO が障り、
ドゃき違荐菴違れる。
障筝馹В羆堺ゃ吾れる。
.SH バグ
バ違 linux@syskonnect.de 怨し祉い。
.\" .SH 著者
.\" Ralph Roesler \(em rroesler@syskonnect.de
.\" .br
.\" Mirko Lindner \(em mlindner@syskonnect.de
.SH ∫ｉ目
.BR insmod (8),
.BR ifconfig (8),
.BR modprobe (8)
